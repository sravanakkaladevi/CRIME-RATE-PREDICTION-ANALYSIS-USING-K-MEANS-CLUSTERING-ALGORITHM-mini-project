{% extends 'base.html' %}
{% block content %}
<style>
body {
  background-color: #0e1117;
  color: #fff;
  font-family: 'Segoe UI', sans-serif;
}
.future-box {
  background: rgba(0, 0, 0, 0.75);
  border: 1px solid rgba(0, 255, 255, 0.3);
  border-radius: 14px;
  padding: 35px;
  margin: 40px auto;
  max-width: 900px;
  box-shadow: 0 0 20px rgba(0, 255, 255, 0.25);
}
.future-box h2 {
  font-weight: 600;
  text-align: center;
  color: #00eaff;
  margin-bottom: 25px;
}
.form-select {
  background: #fff;
  color: #000;
  border-radius: 8px;
  border: 1px solid #00cfff;
  padding: 8px;
  font-weight: 500;
}
.btn-info {
  background-color: #00d5ff;
  color: #000;
  font-weight: 600;
  border: none;
  border-radius: 8px;
  padding: 8px 15px;
}
.btn-info:hover { background-color: #00b3db; }
.risk-box {
  background: rgba(0, 0, 0, 0.7);
  border-left: 6px solid var(--risk-color, #00eaff);
  border-radius: 8px;
  padding: 15px;
  margin-top: 20px;
  color: var(--risk-color, #00eaff);
}
.risk-box[data-risk="High Risk"] { --risk-color: #ff4d4d; }
.risk-box[data-risk="Medium Risk"] { --risk-color: #ffcc00; }
.risk-box[data-risk="Low Risk"] { --risk-color: #00ff88; }
</style>

<div class="future-box">
  <h2>ðŸ”® Future Crime Risk Prediction (By City)</h2>

  <form method="POST" action="/future/">
    {% csrf_token %}
    <div class="row justify-content-center mb-3">
      <div class="col-md-6 mb-2">
        <select name="city" class="form-select" required>
          <option value="">-- Select City/State --</option>
          {% for c in cities %}
          <option value="{{ c }}" {% if selected_city == c %}selected{% endif %}>{{ c }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="col-md-2 mb-2">
        <button type="submit" class="btn btn-info w-100">Predict</button>
      </div>
    </div>
  </form>

  {% if result %}
  <div class="alert alert-info text-center mt-3"><b>{{ result }}</b></div>

  {% if risk_level %}
  <div class="risk-box mt-3" data-risk="{{ risk_level }}">
    <h5>
      {% if risk_level == "High Risk" %} ðŸ”´ {% elif risk_level == "Medium Risk" %} ðŸŸ¡ {% else %} ðŸŸ¢ {% endif %}
      Overall Risk Assessment: <b>{{ risk_level }}</b>
    </h5>
    <p>
      Based on historical data, <b>{{ selected_city }}</b> shows a
      <b>{{ risk_level }}</b> likelihood of overall crime activity in the coming year.
    </p>
  </div>
  {% endif %}
  {% endif %}

  {% if line_plot %}
  <div class="text-center mt-4">
    <h5>ðŸ“Š City Trend Visualization</h5>
    <img src="{{ line_plot }}" alt="Trend Chart" class="img-fluid" style="max-height: 400px; border-radius: 10px;">
  </div>
  {% endif %}
</div>
{% endblock %}
